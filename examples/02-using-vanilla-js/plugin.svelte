<section bind:this={pluginElement}>
    <p>
        <a>[ ⬅️ Go back to menu ]</a>
    </p>
    <p>
        This plugin is written in plain vanilla JS. It also does not use LESS or SCSS
        (just pure CSS) and does not use any Windy.com classes.
    </p>
    <p>
        It does not use any advanced Svelte features, like reactive statements,
    </p>
    <button>Click me</button>
    <div></div>
</section>

<script>
    // In order to write a plugin in plain JS remove the lang="ts" attribute
    // from script tag

    import { setTitle, setUrl, reset } from '@windy/location';
    import { openPlugin } from '@windy/pluginsCtrl';

    import { onMount, onDestroy } from 'svelte';

    import config from './pluginConfig';

    const { name, title } = config;

    let pluginElement;

    onMount(() => {
        // Your plugin was mounted and pluginElement contains
        // reference to the DOM element of your plugin

        const buttonEl = pluginElement.querySelector('button');
        const divEl = pluginElement.querySelector('div');
        const goBackLink = pluginElement.querySelector('a');

        buttonEl.onclick = () => {
            divEl.innerHTML = 'Button was clicked';
        };

        goBackLink.onclick = () => {
            openPlugin('menu');
        };

    });

    export const onopen = (params) => {
        setTitle(title);
        setUrl(name,`/plugins/${name}`);

    };

    onDestroy(() => {
        reset(name);
    });
</script>

<style>
    /* Remove lang="less" and you can use plain CSS */

    section {
        background: rgb(43, 43, 43);
        color: white;
        line-height: 1.8;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        padding: 2em;
    }
    p {
        line-height: 1.8;
    }
    button {
        cursor: pointer;
    }
    a {
        text-decoration: underline;
    }
</style>

